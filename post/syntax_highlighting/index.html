<!doctype html><html lang=ja><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-158035573-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-158035573-1');</script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>hugo でシンタックスハイライトを追加した | tbsmcd.net</title><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/code.css><link rel=stylesheet href=/css/fonts.css><link rel=stylesheet href=/css/custom.css><link rel=apple-touch-icon sizes=57x57 href=/apple-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/apple-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=/apple-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=/apple-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=/apple-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=/apple-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=/apple-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=/apple-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/apple-icon-180x180.png><link rel=icon type=image/png sizes=192x192 href=/android-icon-192x192.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=96x96 href=/favicon-96x96.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><meta name=msapplication-TileColor content="#ffffff"><meta name=msapplication-TileImage content="/ms-icon-144x144.png"><meta name=theme-color content="#ffffff"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@tbsmcd"><meta name=twitter:creator content="@tbsmcd"><meta property="og:url" content="https://tbsmcd.net/post/syntax_highlighting/"><meta property="og:title" content="hugo でシンタックスハイライトを追加した | tbsmcd"><meta property="og:description" content="hugo でシンタックスハイライトを追加した"><meta property="og:image" content="https://tbsmcd.net/post/added_favicon/icon_mono.jpg"></head><body><header>tbsmcd.net : <a href=/>Home</a> | <a href=/archives/>Archives</a> | <a href=/tags/>Tags</a> | <a href=/search/>Search</a> | <a href=/profile/>Profile</a></header><main><h1 class=single>hugo でシンタックスハイライトを追加した</h1><p class=article-date>2020-02-05</p><h2 id=heading>こういう感じ</h2><div class=highlight><pre class=chroma><code class=language-simple.php data-lang=simple.php><span class=cp>&lt;?php</span>
<span class=k>class</span> <span class=nc>SimpleClass</span>
<span class=p>{</span>
    <span class=c1>// プロパティの宣言
</span><span class=c1></span>    <span class=k>public</span> <span class=nv>$var</span> <span class=o>=</span> <span class=s1>&#39;a default value&#39;</span><span class=p>;</span>

    <span class=c1>// メソッドの宣言
</span><span class=c1></span>    <span class=k>public</span> <span class=k>function</span> <span class=nf>displayVar</span><span class=p>()</span> <span class=p>{</span>
        <span class=k>echo</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>var</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>}</span>
</code></pre></div><p>コードは <a href=https://www.php.net/manual/ja/language.oop5.basic.php>PHP: クラスの基礎 - Manual</a> より</p><h2 id=heading-1>テーマの編集</h2><p>対応する Pull Request<br><a href=https://github.com/tbsmcd/hugo-xmin/pull/1>Add syntax highlighting #1</a></p><p>シンタックスハイライト用の CSS を生成する。コマンドは<a href=https://gohugo.io/commands/hugo_gen_chromastyles>こちらを参照</a>のこと。/
<code>style-name</code> は<a href=https://xyproto.github.io/splash/docs/longer/index.html>ここ</a>から好きなものを選べば良い。今回は manni を選んだ。</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>$ hugo gen chromastyles --style <span class=o>[</span>style-name<span class=o>]</span> &gt; code.css
</code></pre></div><p>ついでにインラインコードの背景を manni と合わせた。</p><p>生成した CSS を <a href=https://github.com/tbsmcd/hugo-xmin/pull/1/files#diff-8b819c8434b56b4e51f882d264ee6fbe>static/css/ 以下に配置し</a>、html から読み込みために <a href=https://github.com/tbsmcd/hugo-xmin/pull/1/files#diff-8ab16b2cae0b26a574b75e8e5c19e378>header を編集</a>する。</p><p>ローカルでビルドする場合はブログのソースに CSS を追加すれば良いと思う。今回は Github Actions でビルドしているため、テーマの方に追加した。その場合でもテーマに追加せず、ビルドスクリプト上で配置することも出来ると思う。</p><h2 id=configtoml->config.toml の編集</h2><p>対応する Pull Request<br><a href=https://github.com/tbsmcd/tbsmcd.github.io/pull/5>シンタックスハイライト適用 #5</a></p><div class=highlight><pre class=chroma><code class=language-toml data-lang=toml><span class=c># シンタックスハイライトを有効に</span>
<span class=nx>pygmentsUseClasses</span> <span class=p>=</span> <span class=kc>true</span>
<span class=c># github 風に ``` で囲む</span>
<span class=nx>pygmentsCodefences</span> <span class=p>=</span> <span class=kc>true</span>
</code></pre></div><p>ついでにシンタックスハイライト無しの pre の背景色も合わせた。</p><pre><code>aaa
あああ
</code></pre><h2 id=heading-2>おわりに</h2><p>ようやくコードを書けるようになった。余計な装飾はいらないが、必要な機能は欲しいというわがままな欲求はこうやって叶えていく。本筋とは関係ないが Github で管理すると機能追加した P/R をブログに載せれるので便利。</p></main><p>Tags:
<a href=/tags/hugo>hugo</a></p><footer><hr>Written by Mochida Tsubasa(@tbsmcd). <a href=https://docs.google.com/forms/d/e/1FAIpQLScLrngN5Znk15zTy06N9qjO3Mi_ubIrXrX9cfYFid_2-mmbQQ/viewform>Contact</a> <a href=/index.xml>Feed</a></footer></body></html>