<!doctype html><html lang=ja><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-158035573-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-158035573-1');</script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Notion をヘッドレス CMS のように使う (with GitHub Actions, hugo) | tbsmcd.net</title><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/scss/code.min.daf683076712a8fd05c112ad6575fb841b4d15640f4c87e71541744189b69260.css><link rel=stylesheet href=/css/fonts.css><link rel=stylesheet href=/scss/custom.min.49ac4ea30ec83923cf0bebecbc514344ae023973719f8c52cba5403b83aea32b.css><script src=/js/theme.js defer></script><link rel=apple-touch-icon sizes=57x57 href=/apple-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/apple-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=/apple-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=/apple-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=/apple-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=/apple-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=/apple-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=/apple-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/apple-icon-180x180.png><link rel=icon type=image/png sizes=192x192 href=/android-icon-192x192.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=96x96 href=/favicon-96x96.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><meta name=msapplication-TileColor content="#ffffff"><meta name=msapplication-TileImage content="/ms-icon-144x144.png"><meta name=theme-color content="#ffffff"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@tbsmcd"><meta name=twitter:creator content="@tbsmcd"><meta property="og:url" content="https://tbsmcd.net/post/notion2hugo/"><meta property="og:title" content="Notion をヘッドレス CMS のように使う (with GitHub Actions, hugo) | tbsmcd"><meta property="og:description" content="Notion をヘッドレス CMS のように使う。GitHub Actions で hugo 用の Markdown に変換する。"><meta name=description content="Notion をヘッドレス CMS のように使う。GitHub Actions で hugo 用の Markdown に変換する。"><meta property="og:image" content="https://tbsmcd.net/post/notion2hugo/ogp.png"></head><body><div class=wrapper><header>tbsmcd.net <a href=/><span>index</span></a>, <a href=/archives/><span>archives</span></a>, <a href=/tags/><span>tags</span></a>, <a href=/search/><span>search</span></a>, <a href=/profile/><span>profile</span></a> <input type=checkbox id=cb-dark-theme> Dark theme</header><main><h1 class=h1-mono-post><span>Notion をヘッドレス CMS のように使う (with GitHub Actions, hugo)</span></h1><div class=article-date-box><p class=article-date>Created: 2022-04-18</p></div><h2 id=notion--hugo->Notion のエディタを使いたい, hugo は捨てたくない</h2><br><p>　Notion を使い、そのエディタの便利さに慣れてくると、hugo で運用しているブログの更新が面倒になってくる。基本的にテキストエディタで Markdown を追加・編集して更新する必要のある hugo は気軽とは言い難い。しかしレンダリングの速さや画像をリサイズできたりなど、hugo の便利な機能も捨てがたい。なので両者を GitHub Actions で組み合わせてみることにした。</p><br><h2 id=->実装 みんな大好きピタゴラ装置</h2><br><ul><li><a href=https://github.com/tbsmcd/notion2hugo>tbsmcd/notion2hugo</a></li><li><a href=https://github.com/tbsmcd/tbsmcd.github.io>tbsmcd/tbsmcd.github.io</a></li></ul><br><a href=/post/notion2hugo/d6a871d7.png><img src=/post/notion2hugo/d6a871d7_hu67d2367bb9634bac5be9c06e4ac58cee_88397_800x0_resize_q90_box_2.png alt=sequence></a><br><p>　やっていることは単純で、 GitHub API と Notion API を利用し更新対象の記事を取得し Markdown に変換して <code>commit && push</code> 。あとは <a href=https://github.com/peaceiris/actions-hugo>peaceiris/actions-hugo</a> を使うことで自動的にデプロイまで行うことができる。</p><p>　notion2hugo の workflow は <code>cron: '*/5 * * * *'</code> で5分に1回動作するようにしているが、<a href=https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows#schedule>期待通りの時刻では動かないものらしい</a>ので、 <code>workflow_dispatch</code> を設定して手動で動くようにした。</p><br><h2 id=heading>今後</h2><br><p>　ある程度は汎用化できそうなので Marketplace に公開したい。ただし hugo では簡単に shortcode を作ることができるので、たぶん皆それぞれのカスタマイズをしているだろうから、簡単ではないと思う。</p><br></main><p>Tags:
<a href=/tags/github-actions>GitHub Actions</a>
<a href=/tags/hugo>hugo</a>
<a href=/tags/notion>Notion</a></p><footer>Written by Mochida Tsubasa(@tbsmcd).<ul><li><a href=https://docs.google.com/forms/d/e/1FAIpQLScLrngN5Znk15zTy06N9qjO3Mi_ubIrXrX9cfYFid_2-mmbQQ/viewform>Contact</a></li><li><a href=/index.xml>Feed</a><li></footer></div></body></html>