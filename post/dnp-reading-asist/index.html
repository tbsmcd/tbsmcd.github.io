<!doctype html><html lang=ja><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-158035573-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-158035573-1');</script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>DNP が開発した「読書アシスト」を hugo で試す | tbsmcd.net</title><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/code.css><link rel=stylesheet href=/css/fonts.css><link rel=apple-touch-icon sizes=57x57 href=/apple-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/apple-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=/apple-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=/apple-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=/apple-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=/apple-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=/apple-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=/apple-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/apple-icon-180x180.png><link rel=icon type=image/png sizes=192x192 href=/android-icon-192x192.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=96x96 href=/favicon-96x96.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><meta name=msapplication-TileColor content="#ffffff"><meta name=msapplication-TileImage content="/ms-icon-144x144.png"><meta name=theme-color content="#ffffff"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@tbsmcd"><meta name=twitter:creator content="@tbsmcd"><meta property="og:url" content="https://tbsmcd.net/post/dnp-reading-asist/"><meta property="og:title" content="DNP が開発した「読書アシスト」を hugo で試す | tbsmcd"><meta property="og:description" content="DNP が開発した「読書アシスト」を hugo で試してみた。"><meta property="og:image" content="https://tbsmcd.net/post/dnp-reading-asist/rashou.png"></head><body><header>tbsmcd.net : <a href=/>Home</a> | <a href=/archives/>Archives</a> | <a href=/tags/>Tags</a> | <a href=/search/>Search</a> | <a href=/profile/>Profile</a></header><main><h1 class=single>DNP が開発した「読書アシスト」を hugo で試す</h1><p class=article-date>2020-07-11</p><div class=textblock><span class="textline linetop"><span class=bgcolor>DNP&nbsp;の</span></span><span class=textline><span class=bgcolor>開発した</span></span><span class=textline><span class=bgcolor>「読書アシスト」を&nbsp;</span></span><span class=textline><span class=bgcolor>hugo&nbsp;で</span></span><span class=textline><span class=bgcolor>利用する</span></span><span class=textline><span class=bgcolor>実験を</span></span><span class=textline><span class=bgcolor>しているので、</span></span><span class=textline><span class=bgcolor>これは</span></span><span class=textline><span class=bgcolor>あえて</span></span><span class=textline><span class=bgcolor>分かりにくい</span></span><span class=textline><span class=bgcolor>文章に</span></span><span class=textline><span class=bgcolor>するつもりだったが、</span></span><span class=textline><span class=bgcolor></span></span></div><div class=br>&nbsp;</div><div class=textblock><span class="textline linetop"><span class=bgcolor>実際</span></span><span class=textline><span class=bgcolor>のところ</span></span><span class=textline><span class=bgcolor>酔っ払っているのでこのまま</span></span><span class=textline><span class=bgcolor>勢い</span></span><span class=textline><span class=bgcolor>に</span></span><span class=textline><span class=bgcolor>任せて</span></span><span class=textline><span class=bgcolor>タイピングしていけば</span></span><span class=textline><span class=bgcolor>訳の</span></span><span class=textline><span class=bgcolor>わからない</span></span><span class=textline><span class=bgcolor>文章に</span></span><span class=textline><span class=bgcolor>なることは</span></span><span class=textline><span class=bgcolor>うけあいだ。</span></span><span class=textline><span class=bgcolor></span></span></div><div class=br>&nbsp;</div><div class=textblock><span class="textline linetop"><span class=bgcolor>きょうは</span></span><span class=textline><span class=bgcolor>博多駅の</span></span><span class=textline><span class=bgcolor>ヨドバシカメラに</span></span><span class=textline><span class=bgcolor>行って</span></span><span class=textline><span class=bgcolor>オーブンレンジを</span></span><span class=textline><span class=bgcolor>買った。</span></span><span class=textline><span class=bgcolor>子供が</span></span><span class=textline><span class=bgcolor>生まれると</span></span><span class=textline><span class=bgcolor>金が</span></span><span class=textline><span class=bgcolor>かかりますね。</span></span><span class=textline><span class=bgcolor>先週は</span></span><span class=textline><span class=bgcolor>トヨタの</span></span><span class=textline><span class=bgcolor>ディーラーに</span></span><span class=textline><span class=bgcolor>行ったので……</span></span></div><div class=br>&nbsp;</div><div class=textblock><span class="textline linetop"><span class=bgcolor>まあ</span></span><span class=textline><span class=bgcolor>福岡に</span></span><span class=textline><span class=bgcolor>住んでいて</span></span><span class=textline><span class=bgcolor>車を</span></span><span class=textline><span class=bgcolor>持っていないというのも</span></span><span class=textline><span class=bgcolor>不便な</span></span><span class=textline><span class=bgcolor>話なので良い</span></span><span class=textline><span class=bgcolor>機会だったと</span></span><span class=textline><span class=bgcolor>思っている。</span></span><span class=textline><span class=bgcolor>オーブンレンジも、</span></span><span class=textline><span class=bgcolor>まあ</span></span><span class=textline><span class=bgcolor>買ってよかったものに</span></span><span class=textline><span class=bgcolor>なるんじゃないかな。</span></span><span class=textline><span class=bgcolor></span></span></div><div class=br>&nbsp;</div><div class=textblock><span class="textline linetop"><span class=bgcolor>こんな感じに</span></span><span class=textline><span class=bgcolor>グダグダの</span></span><span class=textline><span class=bgcolor>文章を</span></span><span class=textline><span class=bgcolor>書いてみて</span></span><span class=textline><span class=bgcolor>よいのだろうか？</span></span></div><div class=br>&nbsp;</div><div class=br>&nbsp;</div><div class=br>&nbsp;</div><div class=br>&nbsp;</div><link rel=preload as=style href=https://reading-assist.com/css/jquery.mobile-1.4.5.min2.css onload="this.rel='stylesheet'"><link rel=preload as=style href=https://reading-assist.com/css/style.css onload="this.rel='stylesheet'"><script type=text/javascript src=https://reading-assist.com/js/jquery-1.11.3.min.js></script><script type=text/javascript src=https://reading-assist.com/js/steps_convert.js></script><script type=text/javascript src=https://reading-assist.com/js/jquery.mobile-1.4.5.js></script><hr><p>という感じで、 hugo でも使えることが分かった。</p><p>　今回は Pyhton で以下のようなスクリプトを書いて html を得た。</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=ch>#!/usr/bin/env python3</span>

<span class=kn>import</span> <span class=nn>requests</span>
<span class=kn>from</span> <span class=nn>pprint</span> <span class=kn>import</span> <span class=n>pprint</span>

<span class=n>text</span> <span class=o>=</span> <span class=sa></span><span class=s2>&#34;&#34;&#34;</span><span class=s2>
</span><span class=s2></span><span class=s2>DNP の開発した「読書アシスト」を hugo で利用する実験をしているので、これはあえて分かりにくい文章にするつもりだったが、</span><span class=s2>
</span><span class=s2></span><span class=s2>実際のところ酔っ払っているのでこのまま勢いに任せてタイピングしていけば訳のわからない文章になることはうけあいだ。</span><span class=s2>
</span><span class=s2></span><span class=s2>きょうは博多駅のヨドバシカメラに行ってオーブンレンジを買った。子供が生まれると金がかかりますね。先週はトヨタのディーラーに行ったので……</span><span class=s2>
</span><span class=s2></span><span class=s2>まあ福岡に住んでいて車を持っていないというのも不便な話なので良い機会だったと思っている。オーブンレンジも、まあ買ってよかったものになるんじゃないかな。</span><span class=s2>
</span><span class=s2></span><span class=s2>こんな感じにグダグダの文章を書いてみてよいのだろうか？</span><span class=s2>
</span><span class=s2></span><span class=s2>&#34;&#34;&#34;</span>

<span class=n>url</span> <span class=o>=</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>https://reading-assist.com/api/assistapi.php</span><span class=s1>&#39;</span>
<span class=n>headers</span> <span class=o>=</span> <span class=p>{</span>
    <span class=sa></span><span class=s1>&#39;</span><span class=s1>Content-Type</span><span class=s1>&#39;</span><span class=p>:</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>application/x-www-form-urlencoded</span><span class=s1>&#39;</span>
<span class=p>}</span>
<span class=n>item_data</span> <span class=o>=</span> <span class=p>{</span>
    <span class=sa></span><span class=s1>&#39;</span><span class=s1>action</span><span class=s1>&#39;</span><span class=p>:</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>conv_htmltext</span><span class=s1>&#39;</span><span class=p>,</span>
    <span class=sa></span><span class=s1>&#39;</span><span class=s1>title</span><span class=s1>&#39;</span><span class=p>:</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>かいもの</span><span class=s1>&#39;</span><span class=p>,</span>
    <span class=sa></span><span class=s1>&#39;</span><span class=s1>htmlText</span><span class=s1>&#39;</span><span class=p>:</span> <span class=n>text</span>
<span class=p>}</span>

<span class=k>print</span><span class=p>(</span><span class=n>requests</span><span class=o>.</span><span class=n>post</span><span class=p>(</span><span class=n>url</span><span class=p>,</span> <span class=n>data</span><span class=o>=</span><span class=n>item_data</span><span class=p>)</span><span class=o>.</span><span class=n>content</span><span class=o>.</span><span class=n>decode</span><span class=p>(</span><span class=p>)</span><span class=p>)</span>
</code></pre></div><p>しかしこれで得られる html で読み込む CSS/JavaScript は <a href=https://reading-assist.com>https://reading-assist.com</a> からの相対パスになっているので多少の編集が必要だし、hugo で使用する場合は html ファイル中で CSS を読み込むことになるので遅延読み込みをしたら良いだろう。以下のようにすれば良い。</p><div class=highlight><pre class=chroma><code class=language-html data-lang=html><span class=p>&lt;</span><span class=nt>link</span> <span class=na>rel</span><span class=o>=</span><span class=s>&#34;preload&#34;</span> <span class=na>as</span><span class=o>=</span><span class=s>&#34;style&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;https://reading-assist.com/css/jquery.mobile-1.4.5.min2.css&#34;</span> <span class=na>onload</span><span class=o>=</span><span class=s>&#34;this.rel=&#39;stylesheet&#39;&#34;</span><span class=p></span><span class=p>&gt;</span>
<span class=p>&lt;</span><span class=nt>link</span> <span class=na>rel</span><span class=o>=</span><span class=s>&#34;preload&#34;</span> <span class=na>as</span><span class=o>=</span><span class=s>&#34;style&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;https://reading-assist.com/css/style.css&#34;</span> <span class=na>onload</span><span class=o>=</span><span class=s>&#34;this.rel=&#39;stylesheet&#39;&#34;</span><span class=p></span><span class=p>&gt;</span>

<span class=p>&lt;</span><span class=nt>script</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;text/javascript&#34;</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://reading-assist.com/js/jquery-1.11.3.min.js&#34;</span><span class=p></span><span class=p>&gt;</span><span class=p>&lt;</span><span class=p>/</span><span class=nt>script</span><span class=p>&gt;</span>
<span class=p>&lt;</span><span class=nt>script</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;text/javascript&#34;</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://reading-assist.com/js/steps_convert.js&#34;</span><span class=p></span><span class=p>&gt;</span><span class=p>&lt;</span><span class=p>/</span><span class=nt>script</span><span class=p>&gt;</span>
<span class=p>&lt;</span><span class=nt>script</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;text/javascript&#34;</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://reading-assist.com/js/jquery.mobile-1.4.5.js&#34;</span><span class=p></span><span class=p>&gt;</span><span class=p>&lt;</span><span class=p>/</span><span class=nt>script</span><span class=p>&gt;</span>
</code></pre></div><p>ファイルの全体は <a href=https://github.com/tbsmcd/tbsmcd.github.io/blob/source/content/post/dnp-reading-asist/index.md>Github</a> で見ることができる。</p></main><p>Tags:
<a href=/tags/hugo>hugo</a>
<a href=/tags/python>Python</a></p><footer><hr>Written by Mochida Tsubasa(@tbsmcd). <a href=https://docs.google.com/forms/d/e/1FAIpQLScLrngN5Znk15zTy06N9qjO3Mi_ubIrXrX9cfYFid_2-mmbQQ/viewform>Contact</a> <a href=/index.xml>Feed</a></footer></body></html>