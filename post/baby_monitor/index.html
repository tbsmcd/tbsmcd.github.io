<!doctype html><html lang=ja><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-158035573-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-158035573-1');</script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>簡易ベビーモニター（赤外線対応）を Raspberry Pi で作った（ノーコード・ノー工具） | tbsmcd.net</title><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/code.css><link rel=stylesheet href=/css/fonts.css><link rel=apple-touch-icon sizes=57x57 href=/apple-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/apple-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=/apple-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=/apple-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=/apple-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=/apple-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=/apple-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=/apple-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/apple-icon-180x180.png><link rel=icon type=image/png sizes=192x192 href=/android-icon-192x192.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=96x96 href=/favicon-96x96.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><meta name=msapplication-TileColor content="#ffffff"><meta name=msapplication-TileImage content="/ms-icon-144x144.png"><meta name=theme-color content="#ffffff"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@tbsmcd"><meta name=twitter:creator content="@tbsmcd"><meta property="og:url" content="https://tbsmcd.net/post/baby_monitor/"><meta property="og:title" content="簡易ベビーモニター（赤外線対応）を Raspberry Pi で作った（ノーコード・ノー工具） | tbsmcd"><meta property="og:description" content="簡易ベビーモニターを Raspberry Pi で作った話。コードは書かず、工具も使わなかった。"><meta property="og:image" content="https://tbsmcd.net/post/baby_monitor/case.jpg"></head><body><header>tbsmcd.net : <a href=/>Home</a> | <a href=/archives/>Archives</a> | <a href=/tags/>Tags</a> | <a href=/search/>Search</a> | <a href=/profile/>Profile</a></header><main><h1 class=single>簡易ベビーモニター（赤外線対応）を Raspberry Pi で作った（ノーコード・ノー工具）</h1><p class=article-date>2020-03-20</p><h2 id=heading>前提</h2><p>セットアップは<a href=https://tbsmcd.net/post/raspberry_pi_setup/>こちら</a>から。</p><h2 id=heading-1>要件</h2><p>0歳児は夜寝るのが早い。だいたい20時には寝ているが、親である我々はそんなに早く寝ることが出来ない。なので子供が寝ている暗い部屋の隣の明るい部屋で夕食を食っていたりするのだけど、最近寝返りをしてそのままうつ伏せで寝ることがあり、それはとても危険なので監視している必要がある（最悪死ぬ）。しかし部屋の仕切りを開放すると寝室が明るくなり眠りが浅くなるので、なるべく暗いままで監視がしたい。これは早めに解決したい課題なので、以下の最低限の機能を実現する（完成品買えば？）。</p><ul><li>暗視カメラとして使用できる</li><li>スマートフォン・PC から確認できる</li></ul><h2 id=heading-2>カメラモジュール</h2><div><a href="https://www.amazon.co.jp/gp/product/B01ERDONZS/ref=as_li_ss_il?ie=UTF8&psc=1&linkCode=li2&tag=tbsmcd-22&linkId=ca6e43e69545c11f661d779203e957ca&language=ja_JP" target=_blank><img border=0 src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=B01ERDONZS&Format=_SL160_&ID=AsinImage&MarketPlace=JP&ServiceVersion=20070822&WS=1&tag=tbsmcd-22&language=ja_JP"></a></div><p>Raspberry Pi に差し込めばすぐに使える。しかし冷静に考えたら高いな……（完成品買えば？）</p><h2 id=mjpg-streamer->mjpg-streamer のインストール</h2><p>カメラの画像（静止画・動画）をストリーミング配信するツール。</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>$ sudo apt-get -y cmake libv4l-dev libjpeg-dev imagemagick
$ git clone https://github.com/jacksonliam/mjpg-streamer.git mjpg-streamer
$ <span class=nb>cd</span> mjpg-streamer/mjpg-streamer-experimental
$ make
</code></pre></div><h2 id=mjpg-streamer--1>mjpg-streamer の起動</h2><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>$ <span class=nb>cd</span> ~/mjpg-streamer/mjpg-streamer-experimental
$ ./mjpg_streamer -o <span class=s2>&#34;./output_http.so -w ./www&#34;</span> -i <span class=s2>&#34;./input_raspicam.so -x 640 -y 480 -fps 30 -q 10&#34;</span>
</code></pre></div><p>Raspberry Pi を起動するたびにこのコマンドを打っていても仕方ないので、<code>/etc/rc.local</code> の最終行 <code>exit 0</code> の前に雑なコマンドを書いて起動時に実行されるようにしている。</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=nb>cd</span> /home/pi/mjpg-streamer/mjpg-streamer-experimental/ <span class=o>&amp;&amp;</span> ./mjpg_streamer -o <span class=s2>&#34;./output_http.so -w ./www&#34;</span> -i <span class=s2>&#34;./input_raspicam.so -x 640 -y 480 -fps 30 -q 10&#34;</span>
</code></pre></div><h2 id=heading-3>ケースを作成</h2><p>現代家庭生活であり余る資材とは段ボールのことだ。なのでこうなる。</p><a href=/post/baby_monitor/case.jpg><img src=/post/baby_monitor/case_hu7efcedf07a347cbe400c9fa9698017b8_2081088_600x0_resize_q90_box.jpg alt=段ボールケース></a><p>一応天地の板は段ボールを90度ズラした状態で二重にしてある。排熱も必要だろうから密閉はしていない。</p><h2 id=heading-4>光源</h2><p>赤外線カメラなので赤外線を照射する必要がある。Amazon で適当に買った。強い赤外線を見つめ続けると白内障になる恐れがあるようで、たぶん神経質になるほどのものではないが、いちおう部屋の天井に向かって照射し、部屋全体に拡散するようにしている。</p><h2 id=heading-5>ブラウザからアクセス</h2><p>http://[ホスト名]:8080/?action=stream</p><a href=/post/baby_monitor/kuma.jpg><img src=/post/baby_monitor/kuma_hu996072521361ba001aada1f9d1648a75_104732_400x0_resize_q90_box.jpg alt=赤外線カメラの画像></a><p>なお http://[ホスト名]:8080 にアクセスしたらその機能の全容は分かる。</p><h2 id=heading-6>展望</h2><p>せっかく寝室にラズパイを置くので、他に使いみちがあると思っている。例えば子供の安眠のためにホワイトノイズを流しているときにインターフォンに気付かないことがあるので、インターフォンを監視しているラズパイから通知が来たら寝室のラズパイがランプを光らせるとか（スマートフォンに通知すれば良いのだけど、寝かしつけ中は案外気付けない）、ありがちだけど環境監視とか。</p><p>以下に書いていくことにする。</p><p><a href=https://scrapbox.io/tbsmcd-memo/%E3%83%A9%E3%82%BA%E3%83%91%E3%82%A4%E3%81%A7%E3%82%84%E3%82%8A%E3%81%9F%E3%81%84%E3%81%93%E3%81%A8>ラズパイでやりたいこと - tbsmcd のいろいろ</a></p></main><p>Tags:
<a href=/tags/raspberry-pi>Raspberry Pi</a></p><footer><hr>Written by Mochida Tsubasa(@tbsmcd). <a href=https://docs.google.com/forms/d/e/1FAIpQLScLrngN5Znk15zTy06N9qjO3Mi_ubIrXrX9cfYFid_2-mmbQQ/viewform>Contact</a> <a href=/index.xml>Feed</a></footer></body></html>