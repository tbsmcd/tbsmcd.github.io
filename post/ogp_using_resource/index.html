<!doctype html><html lang=ja><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-158035573-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-158035573-1');</script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>OGP イメージに resource を使う | tbsmcd.net</title><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/scss/code.min.daf683076712a8fd05c112ad6575fb841b4d15640f4c87e71541744189b69260.css><link rel=stylesheet href=/css/fonts.css><link rel=stylesheet href=/scss/custom.min.cc0656b828987b5176f2eb7c893929d5fdad2b1a23a6f6f234f6e36bfae5a209.css><script src=/js/theme.js defer></script><link rel=apple-touch-icon sizes=57x57 href=/apple-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/apple-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=/apple-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=/apple-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=/apple-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=/apple-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=/apple-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=/apple-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/apple-icon-180x180.png><link rel=icon type=image/png sizes=192x192 href=/android-icon-192x192.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=96x96 href=/favicon-96x96.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><meta name=msapplication-TileColor content="#ffffff"><meta name=msapplication-TileImage content="/ms-icon-144x144.png"><meta name=theme-color content="#ffffff"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@tbsmcd"><meta name=twitter:creator content="@tbsmcd"><meta property="og:url" content="https://tbsmcd.net/post/ogp_using_resource/"><meta property="og:title" content="OGP イメージに resource を使う | tbsmcd"><meta property="og:description" content="OGP イメージに resource を使う"><meta name=description content="OGP イメージに resource を使う"><meta property="og:image" content="https://tbsmcd.net/post/added_favicon/icon_mono.jpg"></head><body><header>tbsmcd.net <a href=/><span>index</span></a>, <a href=/archives/><span>archives</span></a>, <a href=/tags/><span>tags</span></a>, <a href=/search/><span>search</span></a>, <a href=/profile/><span>profile</span></a> <input type=checkbox id=cb-dark-theme> Dark theme</header><main><h1 class=h1-mono-post><span>OGP イメージに resource を使う</span></h1><div class=article-date-box><p class=article-date>Created: 2020-02-23</p></div><h2 id=heading>なぜいまさら</h2><p><a href=/post/image_processing/>hugo で画像を最適化（リサイズ）して出力した</a>のときに画像を <code>/static/images/</code> から <code>/content/post/[各記事]/</code> 以下に移動させたわけだが、完全に OGP タグのことを忘れていた。</p><h2 id=heading-1>変更点</h2><p>/layouts/partials/head_custom.html</p><pre><code>&lt; &lt;meta property=&quot;og:image&quot; content=&quot;{{if .Params.image}}https://tbsmcd.net{{.Params.image}}{{else}}https://tbsmcd.net/images/icon_mono.jpg{{end}}&quot; /&gt;
---
&gt; {{ if .Params.image }}
&gt; {{ $src := .Params.image }}
&gt; {{ $resource := .Page.Resources.GetMatch $src }}
&gt; &lt;meta property=&quot;og:image&quot; content=&quot;https://tbsmcd.net{{ $resource.Permalink }}&quot; /&gt;
&gt; {{ else }}
&gt; &lt;meta property=&quot;og:image&quot; content=&quot;https://tbsmcd.net/images/icon_mono.jpg&quot; /&gt;
&gt; {{ end }}
</code></pre><p>記事ディレクトリ直下にある画像のうち OGP に使いたいファイル名を <code>index.md</code> のメタデータ部分に <code>image: "hoge.jpg"</code> と書いておけば展開される。<code>image: "hoge.jpg"</code> がない場合はデフォルトの画像が表示される。記事直下にない画像ファイルを指定した場合はビルドでエラーになるので気付くことができる。</p></main><p>Tags:
<a href=/tags/hugo>hugo</a></p><footer><hr>Written by Mochida Tsubasa(@tbsmcd). <a href=https://docs.google.com/forms/d/e/1FAIpQLScLrngN5Znk15zTy06N9qjO3Mi_ubIrXrX9cfYFid_2-mmbQQ/viewform>Contact</a> <a href=/index.xml>Feed</a></footer></body></html>