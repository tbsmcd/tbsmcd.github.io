<!doctype html><html lang=ja><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-158035573-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-158035573-1');</script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>言語処理100本ノック2020 を始めた 第1章 | tbsmcd.net</title><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/scss/code.min.daf683076712a8fd05c112ad6575fb841b4d15640f4c87e71541744189b69260.css><link rel=stylesheet href=/css/fonts.css><link rel=stylesheet href=/scss/custom.min.9485b59437435ae6d25c7c5a4824daa8976adbd2b6525e0a0eb0a79116b49386.css><script src=/js/main.js defer></script><link rel=apple-touch-icon sizes=57x57 href=/apple-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/apple-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=/apple-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=/apple-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=/apple-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=/apple-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=/apple-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=/apple-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/apple-icon-180x180.png><link rel=icon type=image/png sizes=192x192 href=/android-icon-192x192.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=96x96 href=/favicon-96x96.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><meta name=msapplication-TileColor content="#ffffff"><meta name=msapplication-TileImage content="/ms-icon-144x144.png"><meta name=theme-color content="#ffffff"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@tbsmcd"><meta name=twitter:creator content="@tbsmcd"><meta property="og:url" content="https://tbsmcd.net/post/100knock_1/"><meta property="og:title" content="言語処理100本ノック2020 を始めた 第1章 | tbsmcd"><meta property="og:description" content="言語処理100本ノック2020 の解答を自分なりに"><meta name=description content="言語処理100本ノック2020 の解答を自分なりに"><meta property="og:image" content="https://tbsmcd.net/post/100knock_1/ss.png"></head><body><div class=wrapper><header><div class=title-container><div class="title-item site-title">tbsmcd.net</div><div class=title-item><input type=checkbox id=cb-dark-theme> Dark theme</div></div><div><a href=/><span>index</span></a>, <a href=/archives/><span>archives</span></a>, <a href=/tags/><span>tags</span></a>, <a href=/search/><span>search</span></a>, <a href=/profile/><span>profile</span></a></div></header><main><h1 class=h1-mono-post><span>言語処理100本ノック2020 を始めた 第1章</span></h1><div class=article-date-box><p class=article-date>Created: 2020-04-24</p></div><a href=/post/100knock_1/ss.png><img src=/post/100knock_1/ss_hu2ca02ffd30de1f892af0ccb0ba018cb5_74292_400x0_resize_q90_box_2.png alt="Jupyter notebook"></a><p><a href=https://nlp100.github.io/ja/>言語処理100本ノック 2020 - NLP100 2020</a></p><p>関連記事: <a href=/tags/%E8%A8%80%E8%AA%9E%E5%87%A6%E7%90%86100%E6%9C%AC%E3%83%8E%E3%83%83%E3%82%AF/>tag 言語処理100本ノック</a></p><h2 id=heading>なぜ？</h2><p>最近 Python を書いてないこともあり、思うところもあり。</p><h2 id=heading-1>環境</h2><p>Python3 + <a href=https://www.python.jp/install/anaconda/macos/install.html>Anaconda</a> + <a href=https://jupyter.org/>Jupyter Notebook</a></p><p>インストール等については気が向いた時に。</p><h2 id=code>code</h2><p>以下ネタバレ</p><p>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.</p><p>まず第1章から</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=c1># 000</span>
<span class=n>st</span> <span class=o>=</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>stressed</span><span class=s1>&#39;</span>
<span class=n>ans</span> <span class=o>=</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>&#39;</span>
<span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>st</span><span class=p>)</span><span class=p>)</span><span class=p>:</span>
    <span class=n>ans</span> <span class=o>+</span><span class=o>=</span> <span class=n>st</span><span class=p>[</span><span class=o>-</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span>
<span class=k>print</span><span class=p>(</span><span class=n>ans</span><span class=p>)</span>
</code></pre></div><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=c1># 000</span>
<span class=n>st</span> <span class=o>=</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>stressed</span><span class=s1>&#39;</span>
<span class=k>print</span><span class=p>(</span><span class=n>st</span><span class=p>[</span><span class=p>:</span><span class=p>:</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span><span class=p>)</span> <span class=c1># [start:stop:step] start = 0 つまり1文字目の前から</span>
</code></pre></div><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=c1># 001</span>
<span class=n>st</span> <span class=o>=</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>パタトクカシーー</span><span class=s1>&#39;</span>
<span class=k>print</span><span class=p>(</span><span class=n>st</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>+</span> <span class=n>st</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span> <span class=o>+</span> <span class=n>st</span><span class=p>[</span><span class=mi>4</span><span class=p>]</span> <span class=o>+</span> <span class=n>st</span><span class=p>[</span><span class=mi>6</span><span class=p>]</span><span class=p>)</span>
</code></pre></div><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=c1># 001</span>
<span class=n>st</span> <span class=o>=</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>パタトクカシーー</span><span class=s1>&#39;</span>
<span class=k>print</span><span class=p>(</span><span class=n>st</span><span class=p>[</span><span class=p>:</span><span class=p>:</span><span class=mi>2</span><span class=p>]</span><span class=p>)</span> <span class=c1># 000 と同様</span>
</code></pre></div><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=c1>## 002</span>
<span class=n>pc</span> <span class=o>=</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>パトカー</span><span class=s1>&#39;</span>
<span class=n>tx</span> <span class=o>=</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>タクシー</span><span class=s1>&#39;</span>
<span class=k>print</span><span class=p>(</span><span class=sa></span><span class=s1>&#39;</span><span class=s1>&#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=p>[</span><span class=n>p</span> <span class=o>+</span> <span class=n>t</span> <span class=k>for</span> <span class=n>p</span><span class=p>,</span> <span class=n>t</span> <span class=ow>in</span> <span class=nb>zip</span><span class=p>(</span><span class=n>pc</span><span class=p>,</span> <span class=n>tx</span><span class=p>)</span><span class=p>]</span><span class=p>)</span><span class=p>)</span> <span class=c1># zip : 複数の list の要素をまとめて読む, 内包表記のことを忘れている</span>
</code></pre></div><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=c1># 003</span>
<span class=n>txt</span> <span class=o>=</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>Now I need a drink, alcoholic of course, after the heavy lectures involving quantum mechanics.</span><span class=s1>&#39;</span>
<span class=n>words</span> <span class=o>=</span> <span class=n>txt</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=sa></span><span class=s1>&#39;</span><span class=s1>,</span><span class=s1>&#39;</span><span class=p>,</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=sa></span><span class=s1>&#39;</span><span class=s1>.</span><span class=s1>&#39;</span><span class=p>,</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=p>)</span>
<span class=p>[</span><span class=nb>len</span><span class=p>(</span><span class=n>word</span><span class=p>)</span> <span class=k>for</span> <span class=n>word</span> <span class=ow>in</span> <span class=n>words</span><span class=p>]</span>
</code></pre></div><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=c1># 004</span>
<span class=n>txt</span> <span class=o>=</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>Hi He Lied Because Boron Could Not Oxidize Fluorine. New Nations Might Also Sign Peace Security Clause. Arthur King Can.</span><span class=s1>&#39;</span>
<span class=n>words</span> <span class=o>=</span> <span class=n>txt</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=sa></span><span class=s1>&#39;</span><span class=s1>.</span><span class=s1>&#39;</span><span class=p>,</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=p>)</span>
<span class=n>target</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>8</span><span class=p>,</span> <span class=mi>9</span><span class=p>,</span> <span class=mi>15</span><span class=p>,</span> <span class=mi>16</span><span class=p>,</span> <span class=mi>19</span><span class=p>]</span>
<span class=n>res</span> <span class=o>=</span> <span class=p>{</span><span class=p>}</span>
<span class=n>i</span> <span class=o>=</span> <span class=mi>1</span>
<span class=k>for</span> <span class=n>i</span><span class=p>,</span> <span class=n>w</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=n>words</span><span class=p>)</span><span class=p>:</span> <span class=c1>#  enumerate 忘れる</span>
    <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>+</span> <span class=mi>1</span> <span class=ow>in</span> <span class=n>target</span><span class=p>)</span><span class=p>:</span>
        <span class=n>res</span><span class=p>[</span><span class=n>w</span><span class=p>[</span><span class=mi>0</span><span class=p>:</span><span class=mi>1</span><span class=p>]</span><span class=p>]</span> <span class=o>=</span> <span class=n>i</span> <span class=o>+</span> <span class=mi>1</span> 
    <span class=k>else</span><span class=p>:</span>
        <span class=n>res</span><span class=p>[</span><span class=n>w</span><span class=p>[</span><span class=mi>0</span><span class=p>:</span><span class=mi>2</span><span class=p>]</span><span class=p>]</span> <span class=o>=</span> <span class=n>i</span> <span class=o>+</span> <span class=mi>1</span>
<span class=n>res</span>
</code></pre></div><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=c1># 005</span>
<span class=k>def</span> <span class=nf>n_gram</span><span class=p>(</span><span class=n>target</span><span class=p>,</span> <span class=n>n</span><span class=p>)</span><span class=p>:</span> <span class=c1># スライスは文字列でもリストでも出来る</span>
    <span class=k>return</span> <span class=p>[</span><span class=n>target</span><span class=p>[</span><span class=n>i</span><span class=p>:</span><span class=n>i</span> <span class=o>+</span> <span class=n>n</span><span class=p>]</span> <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>target</span><span class=p>)</span> <span class=o>-</span> <span class=n>n</span> <span class=o>+</span> <span class=mi>1</span><span class=p>)</span><span class=p>]</span>

<span class=n>target</span> <span class=o>=</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>I am an NLPer</span><span class=s1>&#39;</span>

<span class=c1># 文字 bi-gram</span>
<span class=k>print</span><span class=p>(</span><span class=n>n_gram</span><span class=p>(</span><span class=n>target</span><span class=p>,</span> <span class=mi>2</span><span class=p>)</span><span class=p>)</span>

<span class=c1># 単語 bi-gram</span>
<span class=k>print</span><span class=p>(</span><span class=n>n_gram</span><span class=p>(</span><span class=n>target</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=sa></span><span class=s1>&#39;</span><span class=s1> </span><span class=s1>&#39;</span><span class=p>)</span><span class=p>,</span> <span class=mi>2</span><span class=p>)</span><span class=p>)</span>
</code></pre></div><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=c1># 006</span>
<span class=k>def</span> <span class=nf>n_gram</span><span class=p>(</span><span class=n>target</span><span class=p>,</span> <span class=n>n</span><span class=p>)</span><span class=p>:</span>
    <span class=k>return</span> <span class=nb>set</span><span class=p>(</span><span class=p>[</span><span class=n>target</span><span class=p>[</span><span class=n>i</span><span class=p>:</span><span class=n>i</span> <span class=o>+</span> <span class=n>n</span><span class=p>]</span> <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>target</span><span class=p>)</span> <span class=o>-</span> <span class=n>n</span> <span class=o>+</span> <span class=mi>1</span><span class=p>)</span><span class=p>]</span><span class=p>)</span>

<span class=n>X</span> <span class=o>=</span> <span class=n>n_gram</span><span class=p>(</span><span class=sa></span><span class=s1>&#39;</span><span class=s1>paraparaparadise</span><span class=s1>&#39;</span><span class=p>,</span> <span class=mi>2</span><span class=p>)</span>
<span class=n>Y</span> <span class=o>=</span> <span class=n>n_gram</span><span class=p>(</span><span class=sa></span><span class=s1>&#39;</span><span class=s1>paragraph</span><span class=s1>&#39;</span><span class=p>,</span> <span class=mi>2</span><span class=p>)</span>

<span class=c1># 和集合</span>
<span class=k>print</span><span class=p>(</span><span class=n>X</span> <span class=o>|</span> <span class=n>Y</span><span class=p>)</span>
<span class=c1># 積集合</span>
<span class=k>print</span><span class=p>(</span><span class=n>X</span> <span class=o>&amp;</span> <span class=n>Y</span><span class=p>)</span>
<span class=c1># 差集合</span>
<span class=k>print</span><span class=p>(</span><span class=n>X</span> <span class=o>-</span> <span class=n>Y</span><span class=p>)</span>
<span class=c1># 存在確認</span>
<span class=k>print</span><span class=p>(</span><span class=sa></span><span class=s1>&#39;</span><span class=s1>se</span><span class=s1>&#39;</span> <span class=ow>in</span> <span class=n>X</span><span class=p>)</span>
<span class=k>print</span><span class=p>(</span><span class=sa></span><span class=s1>&#39;</span><span class=s1>se</span><span class=s1>&#39;</span> <span class=ow>in</span> <span class=n>Y</span><span class=p>)</span>
</code></pre></div><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=c1># 007</span>
<span class=k>def</span> <span class=nf>sent</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>,</span> <span class=n>z</span><span class=p>)</span><span class=p>:</span>
    <span class=k>return</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=n>x</span><span class=p>)</span> <span class=o>+</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>時の</span><span class=s1>&#39;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>y</span><span class=p>)</span> <span class=o>+</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>は</span><span class=s1>&#39;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>z</span><span class=p>)</span><span class=p>)</span>
<span class=k>print</span><span class=p>(</span><span class=n>sent</span><span class=p>(</span><span class=mi>12</span><span class=p>,</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>気温</span><span class=s1>&#39;</span><span class=p>,</span> <span class=mf>22.4</span><span class=p>)</span><span class=p>)</span>
</code></pre></div><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=c1># 008</span>
<span class=k>def</span> <span class=nf>cr</span><span class=p>(</span><span class=n>st</span><span class=p>)</span><span class=p>:</span>
    <span class=n>res</span> <span class=o>=</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>&#39;</span>
    <span class=k>for</span> <span class=n>s</span> <span class=ow>in</span> <span class=nb>list</span><span class=p>(</span><span class=n>st</span><span class=p>)</span><span class=p>:</span>
        <span class=k>if</span> <span class=n>s</span><span class=o>.</span><span class=n>isalpha</span> <span class=ow>and</span> <span class=n>s</span><span class=o>.</span><span class=n>islower</span>
            <span class=n>res</span> <span class=o>+</span><span class=o>=</span> <span class=nb>chr</span><span class=p>(</span><span class=mi>219</span> <span class=o>-</span> <span class=nb>ord</span><span class=p>(</span><span class=n>s</span><span class=p>)</span><span class=p>)</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>res</span> <span class=o>+</span><span class=o>=</span> <span class=n>s</span>
    <span class=k>return</span> <span class=n>res</span>

<span class=n>code</span> <span class=o>=</span> <span class=n>cr</span><span class=p>(</span><span class=sa></span><span class=s2>&#34;</span><span class=s2>I</span><span class=s2>&#39;</span><span class=s2>m happy.</span><span class=s2>&#34;</span><span class=p>)</span>
<span class=n>string</span> <span class=o>=</span> <span class=n>cr</span><span class=p>(</span><span class=n>code</span><span class=p>)</span>

<span class=k>print</span><span class=p>(</span><span class=n>code</span><span class=p>)</span>
<span class=k>print</span><span class=p>(</span><span class=n>string</span><span class=p>)</span>
</code></pre></div><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=c1>## 009</span>
<span class=kn>import</span> <span class=nn>random</span>

<span class=k>def</span> <span class=nf>make_rand</span><span class=p>(</span><span class=n>s</span><span class=p>)</span><span class=p>:</span>
    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>s</span><span class=p>)</span> <span class=o>&lt;</span><span class=o>=</span> <span class=mi>4</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>s</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=n>li</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=n>s</span><span class=p>)</span>
        <span class=n>first</span> <span class=o>=</span> <span class=n>li</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
        <span class=n>last</span> <span class=o>=</span> <span class=n>li</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>)</span>
        <span class=n>random</span><span class=o>.</span><span class=n>shuffle</span><span class=p>(</span><span class=n>li</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>first</span> <span class=o>+</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>&#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>li</span><span class=p>)</span> <span class=o>+</span> <span class=n>last</span>

<span class=n>text</span> <span class=o>=</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>I couldn’t believe that I could actually understand what I was reading : the phenomenal power of the human mind .</span><span class=s1>&#39;</span>
<span class=n>res</span> <span class=o>=</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>&#39;</span>
<span class=k>for</span> <span class=n>w</span> <span class=ow>in</span> <span class=n>text</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=sa></span><span class=s1>&#39;</span><span class=s1> </span><span class=s1>&#39;</span><span class=p>)</span><span class=p>:</span>
    <span class=n>res</span> <span class=o>+</span><span class=o>=</span> <span class=n>make_rand</span><span class=p>(</span><span class=n>w</span><span class=p>)</span>

<span class=k>print</span><span class=p>(</span><span class=n>res</span><span class=p>)</span>
</code></pre></div><p>最初の方はスライスなどを思い出すために複数パターン書いてみたが、あとの方では飽きてる。</p></main><p>Tags:
<a href=/tags/%E8%A8%80%E8%AA%9E%E5%87%A6%E7%90%86100%E6%9C%AC%E3%83%8E%E3%83%83%E3%82%AF>言語処理100本ノック</a>
<a href=/tags/python>Python</a></p><footer>Mochida Tsubasa (@tbsmcd)<br><a href=https://docs.google.com/forms/d/e/1FAIpQLScLrngN5Znk15zTy06N9qjO3Mi_ubIrXrX9cfYFid_2-mmbQQ/viewform>Contact</a>, <a href=/index.xml>Feed</a></footer></div></body></html>