<!doctype html><html lang=ja><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-158035573-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-158035573-1');</script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>言語処理100本ノック 2020 第5章 | tbsmcd.net</title><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/code.css><link rel=stylesheet href=/css/fonts.css><link rel=stylesheet href=/css/custom.css><script src=/js/theme.js async></script><link rel=apple-touch-icon sizes=57x57 href=/apple-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/apple-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=/apple-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=/apple-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=/apple-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=/apple-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=/apple-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=/apple-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/apple-icon-180x180.png><link rel=icon type=image/png sizes=192x192 href=/android-icon-192x192.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=96x96 href=/favicon-96x96.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><meta name=msapplication-TileColor content="#ffffff"><meta name=msapplication-TileImage content="/ms-icon-144x144.png"><meta name=theme-color content="#ffffff"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@tbsmcd"><meta name=twitter:creator content="@tbsmcd"><meta property="og:url" content="https://tbsmcd.net/post/100knock_5/"><meta property="og:title" content="言語処理100本ノック 2020 第5章 | tbsmcd"><meta property="og:description" content="言語処理100本ノック 2020 第5章"><meta name=description content="言語処理100本ノック 2020 第5章"><meta property="og:image" content="https://tbsmcd.net/post/100knock_5/044.png"></head><body><header>tbsmcd.net <a href=/><span>index</span></a>, <a href=/archives/><span>archives</span></a>, <a href=/tags/><span>tags</span></a>, <a href=/search/><span>search</span></a>, <a href=/profile/><span>profile</span></a> <input type=checkbox id=cb-dark-theme> Dark theme</header><main><h1 class=h1-mono-post><span>言語処理100本ノック 2020 第5章</span></h1><p class=article-date>2020-05-11 00:36:27 +0900</p><a href=/post/100knock_5/044.png><img src=/post/100knock_5/044_hu0f3687b2702c916f1d5ebddc843a8333_36536_400x0_resize_q90_box_2.png alt=fig></a><p><a href=https://nlp100.github.io/ja/>言語処理100本ノック 2020 - NLP100 2020</a></p><p>関連記事: <a href=/tags/%E8%A8%80%E8%AA%9E%E5%87%A6%E7%90%86100%E6%9C%AC%E3%83%8E%E3%83%83%E3%82%AF/>tag 言語処理100本ノック</a></p><h2 id=heading>所感</h2><p>いよいよタームの難度が上がってきた。</p><h2 id=code>code</h2><h3 id=040>040</h3><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=ch>#!/usr/local/bin/python3</span>


<span class=k>class</span> <span class=nc>Morph</span><span class=p>:</span>
    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>word</span><span class=p>)</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>surface</span> <span class=o>=</span> <span class=n>word</span><span class=p>[</span><span class=sa></span><span class=s1>&#39;</span><span class=s1>surface</span><span class=s1>&#39;</span><span class=p>]</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>base</span> <span class=o>=</span> <span class=n>word</span><span class=p>[</span><span class=sa></span><span class=s1>&#39;</span><span class=s1>base</span><span class=s1>&#39;</span><span class=p>]</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>pos</span> <span class=o>=</span> <span class=n>word</span><span class=p>[</span><span class=sa></span><span class=s1>&#39;</span><span class=s1>pos</span><span class=s1>&#39;</span><span class=p>]</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>pos1</span> <span class=o>=</span> <span class=n>word</span><span class=p>[</span><span class=sa></span><span class=s1>&#39;</span><span class=s1>pos1</span><span class=s1>&#39;</span><span class=p>]</span>

<span class=n>src</span> <span class=o>=</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>neko.txt.cabocha</span><span class=s1>&#39;</span>

<span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=n>src</span><span class=p>)</span> <span class=k>as</span> <span class=n>f</span><span class=p>:</span>
    <span class=n>sentence_list</span> <span class=o>=</span> <span class=n>f</span><span class=o>.</span><span class=n>read</span><span class=p>(</span><span class=p>)</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=sa></span><span class=s1>&#39;</span><span class=s1>EOS</span><span class=se>\n</span><span class=s1>&#39;</span><span class=p>)</span>
<span class=n>sentence_list</span> <span class=o>=</span> <span class=p>[</span><span class=n>x</span> <span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=n>sentence_list</span> <span class=k>if</span> <span class=n>x</span> <span class=o>!=</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>&#39;</span><span class=p>]</span>

<span class=n>morph_list</span> <span class=o>=</span> <span class=p>[</span><span class=p>]</span>
<span class=k>for</span> <span class=n>sentence</span> <span class=ow>in</span> <span class=n>sentence_list</span><span class=p>:</span>
    <span class=n>words_list</span> <span class=o>=</span> <span class=p>[</span><span class=p>]</span>
    <span class=k>for</span> <span class=n>word</span> <span class=ow>in</span> <span class=n>sentence</span><span class=o>.</span><span class=n>strip</span><span class=p>(</span><span class=p>)</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=sa></span><span class=s1>&#39;</span><span class=se>\n</span><span class=s1>&#39;</span><span class=p>)</span><span class=p>:</span>
        <span class=k>if</span> <span class=n>word</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>==</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>*</span><span class=s1>&#39;</span><span class=p>:</span>
            <span class=k>continue</span>
        <span class=p>(</span><span class=n>surface</span><span class=p>,</span> <span class=n>attr</span><span class=p>)</span> <span class=o>=</span> <span class=n>word</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=sa></span><span class=s1>&#39;</span><span class=se>\t</span><span class=s1>&#39;</span><span class=p>)</span>
        <span class=n>attr</span> <span class=o>=</span> <span class=n>attr</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=sa></span><span class=s1>&#39;</span><span class=s1>,</span><span class=s1>&#39;</span><span class=p>)</span>
        <span class=n>morph</span> <span class=o>=</span> <span class=n>Morph</span><span class=p>(</span><span class=p>{</span>
            <span class=sa></span><span class=s1>&#39;</span><span class=s1>surface</span><span class=s1>&#39;</span><span class=p>:</span> <span class=n>surface</span><span class=p>,</span>
            <span class=sa></span><span class=s1>&#39;</span><span class=s1>base</span><span class=s1>&#39;</span><span class=p>:</span> <span class=n>attr</span><span class=p>[</span><span class=mi>6</span><span class=p>]</span><span class=p>,</span>
            <span class=sa></span><span class=s1>&#39;</span><span class=s1>pos</span><span class=s1>&#39;</span><span class=p>:</span> <span class=n>attr</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=p>,</span>
            <span class=sa></span><span class=s1>&#39;</span><span class=s1>pos1</span><span class=s1>&#39;</span><span class=p>:</span> <span class=n>attr</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span>
        <span class=p>}</span><span class=p>)</span>
        <span class=n>words_list</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>morph</span><span class=p>)</span>
    <span class=n>morph_list</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>words_list</span><span class=p>)</span>

<span class=k>for</span> <span class=n>m</span> <span class=ow>in</span> <span class=n>morph_list</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span><span class=p>:</span>
    <span class=k>print</span><span class=p>(</span><span class=nb>vars</span><span class=p>(</span><span class=n>m</span><span class=p>)</span><span class=p>)</span>

</code></pre></div><h3 id=041>041</h3><p>以下、前の課題で使ったコードは省略する</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=c1># 041</span>
<span class=k>for</span> <span class=n>chunk</span> <span class=ow>in</span> <span class=n>sentence_chunks</span><span class=p>[</span><span class=mi>7</span><span class=p>]</span><span class=p>:</span>
    <span class=k>print</span><span class=p>(</span><span class=nb>vars</span><span class=p>(</span><span class=n>chunk</span><span class=p>)</span><span class=p>)</span>
    <span class=k>for</span> <span class=n>morph</span> <span class=ow>in</span> <span class=n>chunk</span><span class=o>.</span><span class=n>morphs</span><span class=p>:</span>
        <span class=k>print</span><span class=p>(</span><span class=nb>vars</span><span class=p>(</span><span class=n>morph</span><span class=p>)</span><span class=p>)</span>
</code></pre></div><h3 id=042>042</h3><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=c1># 042</span>
<span class=k>for</span> <span class=n>sentence</span> <span class=ow>in</span> <span class=n>sentence_chunks</span><span class=p>:</span>
    <span class=k>for</span> <span class=n>chunk</span> <span class=ow>in</span> <span class=n>sentence</span><span class=p>:</span>
        <span class=k>if</span> <span class=nb>int</span><span class=p>(</span><span class=n>chunk</span><span class=o>.</span><span class=n>dst</span><span class=p>)</span> <span class=o>!=</span> <span class=o>-</span><span class=mi>1</span><span class=p>:</span>
            <span class=k>print</span><span class=p>(</span>
                <span class=sa></span><span class=s1>&#39;</span><span class=s1>&#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=p>[</span><span class=n>m</span><span class=o>.</span><span class=n>surface</span> <span class=k>for</span> <span class=n>m</span> <span class=ow>in</span> <span class=n>chunk</span><span class=o>.</span><span class=n>morphs</span> <span class=k>if</span> <span class=n>m</span><span class=o>.</span><span class=n>pos</span> <span class=o>!=</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>記号</span><span class=s1>&#39;</span><span class=p>]</span><span class=p>)</span> <span class=o>+</span> <span class=sa></span><span class=s1>&#39;</span><span class=se>\t</span><span class=s1>&#39;</span> <span class=o>+</span>
                <span class=sa></span><span class=s1>&#39;</span><span class=s1>&#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=p>[</span><span class=n>m</span><span class=o>.</span><span class=n>surface</span> <span class=k>for</span> <span class=n>m</span> <span class=ow>in</span> <span class=n>sentence</span><span class=p>[</span><span class=nb>int</span><span class=p>(</span><span class=n>chunk</span><span class=o>.</span><span class=n>dst</span><span class=p>)</span><span class=p>]</span><span class=o>.</span><span class=n>morphs</span> <span class=k>if</span> <span class=n>m</span><span class=o>.</span><span class=n>pos</span> <span class=o>!=</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>記号</span><span class=s1>&#39;</span><span class=p>]</span><span class=p>)</span>
            <span class=p>)</span>
</code></pre></div><h3 id=043>043</h3><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=k>for</span> <span class=n>sentence</span> <span class=ow>in</span> <span class=n>sentence_chunks</span><span class=p>:</span>
    <span class=k>for</span> <span class=n>chunk</span> <span class=ow>in</span> <span class=n>sentence</span><span class=p>:</span>
        <span class=k>if</span> <span class=nb>int</span><span class=p>(</span><span class=n>chunk</span><span class=o>.</span><span class=n>dst</span><span class=p>)</span> <span class=o>!=</span> <span class=o>-</span><span class=mi>1</span><span class=p>:</span>
            <span class=k>if</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>名詞</span><span class=s1>&#39;</span> <span class=ow>in</span> <span class=p>[</span><span class=n>m</span><span class=o>.</span><span class=n>pos</span> <span class=k>for</span> <span class=n>m</span> <span class=ow>in</span> <span class=n>chunk</span><span class=o>.</span><span class=n>morphs</span><span class=p>]</span> <span class=ow>and</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>動詞</span><span class=s1>&#39;</span> <span class=ow>in</span> <span class=p>[</span><span class=n>m</span><span class=o>.</span><span class=n>pos</span> <span class=k>for</span> <span class=n>m</span> <span class=ow>in</span> <span class=n>sentence</span><span class=p>[</span><span class=nb>int</span><span class=p>(</span><span class=n>chunk</span><span class=o>.</span><span class=n>dst</span><span class=p>)</span><span class=p>]</span><span class=o>.</span><span class=n>morphs</span><span class=p>]</span><span class=p>:</span>
                <span class=k>print</span><span class=p>(</span>
                    <span class=sa></span><span class=s1>&#39;</span><span class=s1>&#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=p>[</span><span class=n>m</span><span class=o>.</span><span class=n>surface</span> <span class=k>for</span> <span class=n>m</span> <span class=ow>in</span> <span class=n>chunk</span><span class=o>.</span><span class=n>morphs</span> <span class=k>if</span> <span class=n>m</span><span class=o>.</span><span class=n>pos</span> <span class=o>!=</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>記号</span><span class=s1>&#39;</span><span class=p>]</span><span class=p>)</span> <span class=o>+</span> <span class=sa></span><span class=s1>&#39;</span><span class=se>\t</span><span class=s1>&#39;</span> <span class=o>+</span>
                    <span class=sa></span><span class=s1>&#39;</span><span class=s1>&#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=p>[</span><span class=n>m</span><span class=o>.</span><span class=n>surface</span> <span class=k>for</span> <span class=n>m</span> <span class=ow>in</span> <span class=n>sentence</span><span class=p>[</span><span class=nb>int</span><span class=p>(</span><span class=n>chunk</span><span class=o>.</span><span class=n>dst</span><span class=p>)</span><span class=p>]</span><span class=o>.</span><span class=n>morphs</span> <span class=k>if</span> <span class=n>m</span><span class=o>.</span><span class=n>pos</span> <span class=o>!=</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>記号</span><span class=s1>&#39;</span><span class=p>]</span><span class=p>)</span>
                <span class=p>)</span>
</code></pre></div><h3 id=044>044</h3><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=n>rel</span> <span class=o>=</span> <span class=p>[</span><span class=p>]</span>
<span class=c1># 041 に準じて8文目だけを対象にする</span>
<span class=n>sentence</span> <span class=o>=</span> <span class=n>sentence_chunks</span><span class=p>[</span><span class=mi>7</span><span class=p>]</span>
<span class=k>for</span> <span class=n>chunk</span> <span class=ow>in</span> <span class=n>sentence</span><span class=p>:</span>
    <span class=k>if</span> <span class=nb>int</span><span class=p>(</span><span class=n>chunk</span><span class=o>.</span><span class=n>dst</span><span class=p>)</span> <span class=o>!=</span> <span class=o>-</span><span class=mi>1</span><span class=p>:</span>
        <span class=n>modifier</span> <span class=o>=</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>&#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=p>[</span><span class=n>m</span><span class=o>.</span><span class=n>surface</span> <span class=k>for</span> <span class=n>m</span> <span class=ow>in</span> <span class=n>chunk</span><span class=o>.</span><span class=n>morphs</span> <span class=k>if</span> <span class=n>m</span><span class=o>.</span><span class=n>pos</span> <span class=o>!=</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>記号</span><span class=s1>&#39;</span><span class=p>]</span><span class=p>)</span>
        <span class=n>modifiee</span> <span class=o>=</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>&#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=p>[</span><span class=n>m</span><span class=o>.</span><span class=n>surface</span> <span class=k>for</span> <span class=n>m</span> <span class=ow>in</span> <span class=n>sentence</span><span class=p>[</span><span class=nb>int</span><span class=p>(</span><span class=n>chunk</span><span class=o>.</span><span class=n>dst</span><span class=p>)</span><span class=p>]</span><span class=o>.</span><span class=n>morphs</span> <span class=k>if</span> <span class=n>m</span><span class=o>.</span><span class=n>pos</span> <span class=o>!=</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>記号</span><span class=s1>&#39;</span><span class=p>]</span><span class=p>)</span>
        <span class=n>rel</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=p>[</span><span class=n>modifier</span><span class=p>,</span> <span class=n>modifiee</span><span class=p>]</span><span class=p>)</span>

<span class=n>g</span> <span class=o>=</span> <span class=n>pydot</span><span class=o>.</span><span class=n>graph_from_edges</span><span class=p>(</span><span class=n>rel</span><span class=p>)</span>
<span class=n>g</span><span class=o>.</span><span class=n>write_png</span><span class=p>(</span><span class=sa></span><span class=s1>&#39;</span><span class=s1>044.png</span><span class=s1>&#39;</span><span class=p>,</span> <span class=n>prog</span><span class=o>=</span><span class=sa></span><span class=s1>&#39;</span><span class=s1>dot</span><span class=s1>&#39;</span><span class=p>)</span>
</code></pre></div><h3 id=045>045</h3><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=k>for</span> <span class=n>sentence</span> <span class=ow>in</span> <span class=n>sentence_chunks</span><span class=p>:</span>
    <span class=n>rel</span> <span class=o>=</span> <span class=p>{</span><span class=p>}</span>
    <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>chunk</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=n>sentence</span><span class=p>)</span><span class=p>:</span>
        <span class=n>morphs</span> <span class=o>=</span> <span class=p>[</span><span class=n>m</span> <span class=k>for</span> <span class=n>m</span> <span class=ow>in</span> <span class=n>chunk</span><span class=o>.</span><span class=n>morphs</span> <span class=k>if</span> <span class=n>m</span><span class=o>.</span><span class=n>pos</span> <span class=o>==</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>動詞</span><span class=s1>&#39;</span><span class=p>]</span>
        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>morphs</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
            <span class=n>predicate</span> <span class=o>=</span> <span class=n>morphs</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>base</span>
            <span class=n>cases</span> <span class=o>=</span> <span class=p>[</span><span class=p>]</span>
            <span class=k>for</span> <span class=n>src</span> <span class=ow>in</span> <span class=n>chunk</span><span class=o>.</span><span class=n>srcs</span><span class=p>:</span>
                <span class=n>cases</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=p>[</span><span class=n>m</span><span class=o>.</span><span class=n>surface</span> <span class=k>for</span> <span class=n>m</span> <span class=ow>in</span> <span class=n>sentence</span><span class=p>[</span><span class=n>src</span><span class=p>]</span><span class=o>.</span><span class=n>morphs</span> <span class=k>if</span> <span class=n>m</span><span class=o>.</span><span class=n>pos</span> <span class=o>==</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>助詞</span><span class=s1>&#39;</span><span class=p>]</span><span class=p>)</span>
            <span class=n>case</span> <span class=o>=</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1> </span><span class=s1>&#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>cases</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>case</span> <span class=o>!=</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>&#39;</span><span class=p>:</span>
                <span class=k>print</span><span class=p>(</span><span class=n>predicate</span> <span class=o>+</span> <span class=sa></span><span class=s1>&#39;</span><span class=se>\t</span><span class=s1>&#39;</span> <span class=o>+</span> <span class=n>case</span><span class=p>)</span>
</code></pre></div><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>$ python3 45.py &gt; 45.txt

<span class=c1># コーパス中で頻出する述語と格パターンの組み合わせ</span>
$ cat 45.txt <span class=p>|</span> sort <span class=p>|</span> uniq -c <span class=p>|</span> sort -nr <span class=p>|</span> head -n <span class=m>50</span>
<span class=c1># 「する」「見る」「与える」という動詞の格パターン</span>
$ cat 45.txt <span class=p>|</span> grep <span class=s1>&#39;見る&#39;</span> <span class=p>|</span> sort <span class=p>|</span> uniq -c <span class=p>|</span> sort -nr <span class=p>|</span> head -n <span class=m>50</span>
</code></pre></div><h3 id=046>046</h3><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=k>for</span> <span class=n>sentence</span> <span class=ow>in</span> <span class=n>sentence_chunks</span><span class=p>:</span>
    <span class=n>rel</span> <span class=o>=</span> <span class=p>{</span><span class=p>}</span>
    <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>chunk</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=n>sentence</span><span class=p>)</span><span class=p>:</span>
        <span class=n>morphs</span> <span class=o>=</span> <span class=p>[</span><span class=n>m</span> <span class=k>for</span> <span class=n>m</span> <span class=ow>in</span> <span class=n>chunk</span><span class=o>.</span><span class=n>morphs</span> <span class=k>if</span> <span class=n>m</span><span class=o>.</span><span class=n>pos</span> <span class=o>==</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>動詞</span><span class=s1>&#39;</span><span class=p>]</span>
        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>morphs</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
            <span class=n>predicate</span> <span class=o>=</span> <span class=n>morphs</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>base</span>
            <span class=n>cases</span> <span class=o>=</span> <span class=p>[</span><span class=p>]</span>
            <span class=n>arguments</span> <span class=o>=</span> <span class=p>[</span><span class=p>]</span>
            <span class=k>for</span> <span class=n>src</span> <span class=ow>in</span> <span class=n>chunk</span><span class=o>.</span><span class=n>srcs</span><span class=p>:</span>
                <span class=k>if</span> <span class=n>src</span> <span class=o>!=</span> <span class=n>key</span><span class=p>:</span>
                    <span class=n>cases</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=p>[</span><span class=n>m</span><span class=o>.</span><span class=n>surface</span> <span class=k>for</span> <span class=n>m</span> <span class=ow>in</span> <span class=n>sentence</span><span class=p>[</span><span class=n>src</span><span class=p>]</span><span class=o>.</span><span class=n>morphs</span> <span class=k>if</span> <span class=n>m</span><span class=o>.</span><span class=n>pos</span> <span class=o>==</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>助詞</span><span class=s1>&#39;</span><span class=p>]</span><span class=p>)</span>
                    <span class=n>arguments</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=sa></span><span class=s1>&#39;</span><span class=s1>&#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=p>[</span><span class=n>m</span><span class=o>.</span><span class=n>surface</span> <span class=k>for</span> <span class=n>m</span> <span class=ow>in</span> <span class=n>sentence</span><span class=p>[</span><span class=n>src</span><span class=p>]</span><span class=o>.</span><span class=n>morphs</span><span class=p>]</span><span class=p>)</span><span class=p>)</span>
            <span class=n>case</span> <span class=o>=</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1> </span><span class=s1>&#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>cases</span><span class=p>)</span>
            <span class=n>argument</span> <span class=o>=</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1> </span><span class=s1>&#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>arguments</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>case</span> <span class=o>!=</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>&#39;</span><span class=p>:</span>
                <span class=k>print</span><span class=p>(</span><span class=n>predicate</span> <span class=o>+</span> <span class=sa></span><span class=s1>&#39;</span><span class=se>\t</span><span class=s1>&#39;</span> <span class=o>+</span> <span class=n>case</span> <span class=o>+</span> <span class=sa></span><span class=s1>&#39;</span><span class=se>\t</span><span class=s1>&#39;</span> <span class=o>+</span> <span class=n>argument</span><span class=p>)</span>
</code></pre></div><h3 id=047>047</h3><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=k>for</span> <span class=n>sentence</span> <span class=ow>in</span> <span class=n>sentence_chunks</span><span class=p>:</span>
    <span class=n>rel</span> <span class=o>=</span> <span class=p>{</span><span class=p>}</span>
    <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>chunk</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=n>sentence</span><span class=p>)</span><span class=p>:</span>
        <span class=k>if</span> <span class=p>(</span><span class=sa></span><span class=s1>&#39;</span><span class=s1>サ変接続</span><span class=s1>&#39;</span> <span class=ow>in</span> <span class=p>[</span><span class=n>m</span><span class=o>.</span><span class=n>pos1</span> <span class=k>for</span> <span class=n>m</span> <span class=ow>in</span> <span class=n>chunk</span><span class=o>.</span><span class=n>morphs</span><span class=p>]</span>
            <span class=ow>and</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>を</span><span class=s1>&#39;</span> <span class=ow>in</span> <span class=p>[</span><span class=n>m</span><span class=o>.</span><span class=n>surface</span> <span class=k>for</span> <span class=n>m</span> <span class=ow>in</span> <span class=n>chunk</span><span class=o>.</span><span class=n>morphs</span><span class=p>]</span>
            <span class=ow>and</span> <span class=n>key</span> <span class=o>&lt;</span> <span class=nb>len</span><span class=p>(</span><span class=n>sentence</span><span class=p>)</span> <span class=o>-</span> <span class=mi>1</span>
            <span class=ow>and</span> <span class=n>sentence</span><span class=p>[</span><span class=n>key</span> <span class=o>+</span> <span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>morphs</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>pos</span> <span class=o>==</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>動詞</span><span class=s1>&#39;</span>
        <span class=p>)</span><span class=p>:</span>
            <span class=c1># 述語</span>
            <span class=n>predicate</span> <span class=o>=</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>&#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=p>[</span><span class=n>m</span><span class=o>.</span><span class=n>surface</span> <span class=k>for</span> <span class=n>m</span> <span class=ow>in</span> <span class=n>chunk</span><span class=o>.</span><span class=n>morphs</span><span class=p>]</span><span class=p>)</span> <span class=o>+</span> <span class=n>sentence</span><span class=p>[</span><span class=n>key</span> <span class=o>+</span> <span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>morphs</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>base</span>
            <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>chunk</span><span class=o>.</span><span class=n>srcs</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
                <span class=n>modifiers</span> <span class=o>=</span> <span class=p>[</span><span class=n>sentence</span><span class=p>[</span><span class=nb>int</span><span class=p>(</span><span class=n>src</span><span class=p>)</span><span class=p>]</span><span class=o>.</span><span class=n>morphs</span> <span class=k>for</span> <span class=n>src</span> <span class=ow>in</span> <span class=n>chunk</span><span class=o>.</span><span class=n>srcs</span><span class=p>]</span>
                <span class=n>modifiers_</span> <span class=o>=</span> <span class=p>[</span><span class=nb>list</span><span class=p>(</span><span class=nb>filter</span><span class=p>(</span><span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>助詞</span><span class=s1>&#39;</span> <span class=ow>in</span> <span class=n>x</span><span class=o>.</span><span class=n>pos</span><span class=p>,</span> <span class=n>morphs</span><span class=p>)</span><span class=p>)</span> <span class=k>for</span> <span class=n>morphs</span> <span class=ow>in</span> <span class=n>modifiers</span><span class=p>]</span>
                <span class=n>modifiers_surfaces</span> <span class=o>=</span> <span class=p>[</span><span class=p>[</span><span class=n>morph</span><span class=o>.</span><span class=n>surface</span> <span class=k>for</span> <span class=n>morph</span> <span class=ow>in</span> <span class=n>morphs</span><span class=p>]</span> <span class=k>for</span> <span class=n>morphs</span> <span class=ow>in</span> <span class=n>modifiers_</span><span class=p>]</span>
                <span class=n>modifiers_surfaces</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=nb>filter</span><span class=p>(</span><span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=n>x</span> <span class=o>!=</span> <span class=p>[</span><span class=p>]</span><span class=p>,</span> <span class=n>modifiers_surfaces</span><span class=p>)</span><span class=p>)</span>
                <span class=n>modifiers_surfaces</span> <span class=o>=</span> <span class=p>[</span><span class=n>morphs</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=k>for</span> <span class=n>morphs</span> <span class=ow>in</span> <span class=n>modifiers_surfaces</span><span class=p>]</span>
                <span class=c1># print(modifiers_surfaces)</span>
                <span class=n>modifiers_texts</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=nb>filter</span><span class=p>(</span><span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>助詞</span><span class=s1>&#39;</span> <span class=ow>in</span> <span class=p>[</span><span class=n>m</span><span class=o>.</span><span class=n>pos</span> <span class=k>for</span> <span class=n>m</span> <span class=ow>in</span> <span class=n>x</span><span class=p>]</span><span class=p>,</span> <span class=n>modifiers</span><span class=p>)</span><span class=p>)</span>
                <span class=n>modifiers_texts</span> <span class=o>=</span> <span class=p>[</span><span class=sa></span><span class=s1>&#39;</span><span class=s1>&#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=p>[</span><span class=n>m</span><span class=o>.</span><span class=n>surface</span> <span class=k>for</span> <span class=n>m</span> <span class=ow>in</span> <span class=n>mt</span><span class=p>]</span><span class=p>)</span> <span class=k>for</span> <span class=n>mt</span> <span class=ow>in</span> <span class=n>modifiers_texts</span><span class=p>]</span>
                <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>modifiers_texts</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
                    <span class=k>print</span><span class=p>(</span><span class=sa></span><span class=s1>&#39;</span><span class=se>\t</span><span class=s1>&#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=p>[</span><span class=n>predicate</span><span class=p>,</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1> </span><span class=s1>&#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>modifiers_surfaces</span><span class=p>)</span><span class=p>,</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1> </span><span class=s1>&#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>modifiers_texts</span><span class=p>)</span><span class=p>]</span><span class=p>)</span><span class=p>)</span>
</code></pre></div><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>$ python3 47.py &gt; 47.txt
$ cut -f <span class=m>1</span> 47.txt <span class=p>|</span> sort <span class=p>|</span> uniq -c <span class=p>|</span> sort -nr <span class=p>|</span> head
$ cut -f 1,2 47.txt <span class=p>|</span> sort <span class=p>|</span> uniq -c <span class=p>|</span> sort -nr <span class=p>|</span> head
</code></pre></div><h3 id=048>048</h3><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=k>for</span> <span class=n>sentence</span> <span class=ow>in</span> <span class=n>sentence_chunks</span><span class=p>:</span>
    <span class=k>for</span> <span class=n>chunk</span> <span class=ow>in</span> <span class=n>sentence</span><span class=p>:</span>
        <span class=n>texts</span> <span class=o>=</span> <span class=p>[</span><span class=p>]</span>
        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=p>[</span><span class=n>morph</span> <span class=k>for</span> <span class=n>morph</span> <span class=ow>in</span> <span class=n>chunk</span><span class=o>.</span><span class=n>morphs</span> <span class=k>if</span> <span class=n>morph</span><span class=o>.</span><span class=n>pos</span> <span class=o>==</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>名詞</span><span class=s1>&#39;</span><span class=p>]</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=ow>and</span> <span class=n>chunk</span><span class=o>.</span><span class=n>dst</span> <span class=o>!=</span> <span class=o>-</span><span class=mi>1</span><span class=p>:</span>
            <span class=n>current_chunk</span> <span class=o>=</span> <span class=n>chunk</span>
            <span class=n>texts</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=sa></span><span class=s1>&#39;</span><span class=s1>&#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=p>[</span><span class=n>morph</span><span class=o>.</span><span class=n>surface</span> <span class=k>for</span> <span class=n>morph</span> <span class=ow>in</span> <span class=n>current_chunk</span><span class=o>.</span><span class=n>morphs</span><span class=p>]</span><span class=p>)</span><span class=p>)</span>
            <span class=n>next_chunk</span> <span class=o>=</span> <span class=n>sentence</span><span class=p>[</span><span class=nb>int</span><span class=p>(</span><span class=n>current_chunk</span><span class=o>.</span><span class=n>dst</span><span class=p>)</span><span class=p>]</span>
            <span class=k>while</span> <span class=nb>int</span><span class=p>(</span><span class=n>current_chunk</span><span class=o>.</span><span class=n>dst</span><span class=p>)</span> <span class=o>!=</span> <span class=o>-</span><span class=mi>1</span><span class=p>:</span>
                <span class=n>texts</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=sa></span><span class=s1>&#39;</span><span class=s1>&#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=p>[</span><span class=n>morph</span><span class=o>.</span><span class=n>surface</span> <span class=k>for</span> <span class=n>morph</span> <span class=ow>in</span> <span class=n>next_chunk</span><span class=o>.</span><span class=n>morphs</span><span class=p>]</span><span class=p>)</span><span class=p>)</span>
                <span class=n>current_chunk</span> <span class=o>=</span> <span class=n>next_chunk</span>
                <span class=n>next_chunk</span> <span class=o>=</span> <span class=n>sentence</span><span class=p>[</span><span class=n>next_chunk</span><span class=o>.</span><span class=n>dst</span><span class=p>]</span>
            <span class=k>print</span><span class=p>(</span><span class=sa></span><span class=s1>&#39;</span><span class=s1> -&gt; </span><span class=s1>&#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>texts</span><span class=p>)</span><span class=p>)</span>
</code></pre></div><h3 id=049>049</h3><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=k>def</span> <span class=nf>convert</span><span class=p>(</span><span class=n>sentence</span><span class=p>)</span><span class=p>:</span>
    <span class=n>pl</span><span class=p>,</span> <span class=n>nl</span> <span class=o>=</span> <span class=p>[</span><span class=p>]</span><span class=p>,</span> <span class=p>[</span><span class=n>chunk</span> <span class=k>for</span> <span class=n>chunk</span> <span class=ow>in</span> <span class=n>sentence</span> <span class=k>if</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>名詞</span><span class=s1>&#39;</span> <span class=ow>in</span> <span class=p>[</span><span class=n>m</span><span class=o>.</span><span class=n>pos</span> <span class=k>for</span> <span class=n>m</span> <span class=ow>in</span> <span class=n>chunk</span><span class=o>.</span><span class=n>morphs</span><span class=p>]</span><span class=p>]</span>
    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>nl</span><span class=p>)</span> <span class=o>-</span> <span class=mi>1</span><span class=p>)</span><span class=p>:</span>
        <span class=n>st1</span> <span class=o>=</span> <span class=p>[</span><span class=sa></span><span class=s1>&#39;</span><span class=s1>&#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=p>[</span><span class=n>m</span><span class=o>.</span><span class=n>surface</span> <span class=k>if</span> <span class=n>m</span><span class=o>.</span><span class=n>pos</span> <span class=o>!=</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>名詞</span><span class=s1>&#39;</span> <span class=k>else</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>X</span><span class=s1>&#39;</span> <span class=k>for</span> <span class=n>m</span> <span class=ow>in</span> <span class=n>nl</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>.</span><span class=n>morphs</span><span class=p>]</span><span class=p>)</span><span class=p>]</span>
        <span class=k>for</span> <span class=n>e</span> <span class=ow>in</span> <span class=n>nl</span><span class=p>[</span><span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>:</span><span class=p>]</span><span class=p>:</span>
            <span class=n>dst</span><span class=p>,</span> <span class=n>p</span> <span class=o>=</span> <span class=n>nl</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>.</span><span class=n>dst</span><span class=p>,</span> <span class=p>[</span><span class=p>]</span>
            <span class=n>st2</span> <span class=o>=</span> <span class=p>[</span><span class=sa></span><span class=s1>&#39;</span><span class=s1>&#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=p>[</span><span class=n>m</span><span class=o>.</span><span class=n>surface</span> <span class=k>if</span> <span class=n>m</span><span class=o>.</span><span class=n>pos</span> <span class=o>!=</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>名詞</span><span class=s1>&#39;</span> <span class=k>else</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>Y</span><span class=s1>&#39;</span> <span class=k>for</span> <span class=n>m</span> <span class=ow>in</span> <span class=n>e</span><span class=o>.</span><span class=n>morphs</span><span class=p>]</span><span class=p>)</span><span class=p>]</span>
            <span class=k>while</span> <span class=nb>int</span><span class=p>(</span><span class=n>dst</span><span class=p>)</span> <span class=o>!=</span> <span class=o>-</span><span class=mi>1</span> <span class=ow>and</span> <span class=n>dst</span> <span class=o>!=</span> <span class=n>sentence</span><span class=o>.</span><span class=n>index</span><span class=p>(</span><span class=n>e</span><span class=p>)</span><span class=p>:</span>
                <span class=n>p</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>sentence</span><span class=p>[</span><span class=nb>int</span><span class=p>(</span><span class=n>dst</span><span class=p>)</span><span class=p>]</span><span class=p>)</span>
                <span class=n>dst</span> <span class=o>=</span> <span class=n>sentence</span><span class=p>[</span><span class=nb>int</span><span class=p>(</span><span class=n>dst</span><span class=p>)</span><span class=p>]</span><span class=o>.</span><span class=n>dst</span>
            <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>p</span><span class=p>)</span> <span class=o>&lt;</span> <span class=mi>1</span> <span class=ow>or</span> <span class=n>p</span><span class=p>[</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>dst</span> <span class=o>!=</span> <span class=o>-</span><span class=mi>1</span><span class=p>:</span>
                <span class=n>mid</span> <span class=o>=</span> <span class=p>[</span><span class=sa></span><span class=s1>&#39;</span><span class=s1>&#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=p>[</span><span class=n>m</span><span class=o>.</span><span class=n>surface</span> <span class=k>for</span> <span class=n>m</span> <span class=ow>in</span> <span class=n>c</span><span class=o>.</span><span class=n>morphs</span> <span class=k>if</span> <span class=n>m</span><span class=o>.</span><span class=n>pos</span> <span class=o>!=</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>記号</span><span class=s1>&#39;</span><span class=p>]</span><span class=p>)</span> <span class=k>for</span> <span class=n>c</span> <span class=ow>in</span> <span class=n>p</span><span class=p>]</span>
                <span class=n>pl</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>st1</span> <span class=o>+</span> <span class=n>mid</span> <span class=o>+</span> <span class=p>[</span><span class=sa></span><span class=s1>&#39;</span><span class=s1>Y</span><span class=s1>&#39;</span><span class=p>]</span><span class=p>)</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=n>mid</span><span class=p>,</span> <span class=n>dst</span> <span class=o>=</span> <span class=p>[</span><span class=p>]</span><span class=p>,</span> <span class=n>e</span><span class=o>.</span><span class=n>dst</span>
                <span class=k>while</span> <span class=ow>not</span> <span class=n>sentence</span><span class=p>[</span><span class=nb>int</span><span class=p>(</span><span class=n>dst</span><span class=p>)</span><span class=p>]</span> <span class=ow>in</span> <span class=n>p</span><span class=p>:</span>
                    <span class=n>mid</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=sa></span><span class=s1>&#39;</span><span class=s1>&#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=p>[</span><span class=n>m</span><span class=o>.</span><span class=n>surface</span> <span class=k>for</span> <span class=n>m</span> <span class=ow>in</span> <span class=n>sentence</span><span class=p>[</span><span class=nb>int</span><span class=p>(</span><span class=n>dst</span><span class=p>)</span><span class=p>]</span><span class=o>.</span><span class=n>morphs</span> <span class=k>if</span> <span class=n>m</span><span class=o>.</span><span class=n>pos</span> <span class=o>!=</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>記号</span><span class=s1>&#39;</span><span class=p>]</span><span class=p>)</span><span class=p>)</span>
                    <span class=n>dst</span> <span class=o>=</span> <span class=n>sentence</span><span class=p>[</span><span class=nb>int</span><span class=p>(</span><span class=n>dst</span><span class=p>)</span><span class=p>]</span><span class=o>.</span><span class=n>dst</span>
                <span class=n>ed</span> <span class=o>=</span> <span class=p>[</span><span class=sa></span><span class=s1>&#39;</span><span class=s1>&#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=p>[</span><span class=n>m</span><span class=o>.</span><span class=n>surface</span> <span class=k>for</span> <span class=n>m</span> <span class=ow>in</span> <span class=n>sentence</span><span class=p>[</span><span class=nb>int</span><span class=p>(</span><span class=n>dst</span><span class=p>)</span><span class=p>]</span><span class=o>.</span><span class=n>morphs</span> <span class=k>if</span> <span class=n>m</span><span class=o>.</span><span class=n>pos</span> <span class=o>!=</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>記号</span><span class=s1>&#39;</span><span class=p>]</span><span class=p>)</span><span class=p>]</span>
                <span class=n>pl</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=p>[</span><span class=n>st1</span><span class=p>,</span> <span class=n>st2</span> <span class=o>+</span> <span class=n>mid</span><span class=p>,</span> <span class=n>ed</span><span class=p>]</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>pl</span>

<span class=k>for</span> <span class=n>sentence</span> <span class=ow>in</span> <span class=n>sentence_chunks</span><span class=p>:</span>
    <span class=n>pl</span> <span class=o>=</span> <span class=n>convert</span><span class=p>(</span><span class=n>sentence</span><span class=p>)</span>
    <span class=k>for</span> <span class=n>p</span> <span class=ow>in</span> <span class=n>pl</span><span class=p>:</span>
        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>p</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=p>,</span> <span class=nb>str</span><span class=p>)</span><span class=p>:</span>
            <span class=k>print</span><span class=p>(</span><span class=sa></span><span class=s1>&#39;</span><span class=s1> -&gt; </span><span class=s1>&#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>p</span><span class=p>)</span><span class=p>)</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=k>print</span><span class=p>(</span><span class=n>p</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=p>,</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1> -&gt; </span><span class=s1>&#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>p</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=p>)</span><span class=p>,</span> <span class=n>p</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=p>,</span> <span class=n>sep</span><span class=o>=</span><span class=sa></span><span class=s1>&#39;</span><span class=s1> | </span><span class=s1>&#39;</span><span class=p>)</span>
</code></pre></div><p>49 についてはタームが理解できなかったのでほぼ写経。コードから意図を汲み取ることが必要。</p></main><p>Tags:
<a href=/tags/%E8%A8%80%E8%AA%9E%E5%87%A6%E7%90%86100%E6%9C%AC%E3%83%8E%E3%83%83%E3%82%AF>言語処理100本ノック</a>
<a href=/tags/python>Python</a></p><footer><hr>Written by Mochida Tsubasa(@tbsmcd). <a href=https://docs.google.com/forms/d/e/1FAIpQLScLrngN5Znk15zTy06N9qjO3Mi_ubIrXrX9cfYFid_2-mmbQQ/viewform>Contact</a> <a href=/index.xml>Feed</a></footer></body></html>